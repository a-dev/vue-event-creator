import{computed as e,inject as t,openBlock as n,createElementBlock as a,normalizeClass as i,withModifiers as r,createElementVNode as o,toDisplayString as s,resolveComponent as u,normalizeStyle as d,Fragment as c,renderList as l,createBlock as v,defineComponent as f,createTextVNode as m,withDirectives as _,vModelText as h,ref as p,watch as y,createCommentVNode as g,resolveDynamicComponent as b,nextTick as E,createVNode as M,reactive as D,provide as A}from"vue";import Y from"dayjs";import w from"dayjs/plugin/localeData";var S=function(){return(S=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function k(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{u(a.next(e))}catch(e){r(e)}}function s(e){try{u(a.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((a=a.apply(e,t||[])).next())}))}function T(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var F={messages:{en:{add_months_before:"More before",add_months_after:"More after",time_from:"from",time_till:"till",default_time_title:"Default time",default_time_prompt:"The default time sets for new events",set_default_time:"Set default time",button_edit:"Edit",button_cancel:"Cancel",button_save:"Save",button_remove:"Remove",guard_yes:"Yes",guard_no:"No",guard_prompt:"Are you sure?"},ru:{add_months_before:"Еще месяцы",add_months_after:"Еще месяцы",time_from:"с",time_till:"по",default_time_title:"Время",default_time_prompt:"Время по умолчанию для новых событий",set_default_time:"Поставить время по умолчанию",button_edit:"Редактировать",button_cancel:"Отменить",button_save:"Сохранить",button_remove:"Удалить",guard_yes:"Да",guard_no:"Нет",guard_prompt:"Вы уверены, что хотите удалить событие?"},es:{add_months_before:"Más antes",add_months_after:"Mas despues",time_from:"del",time_till:"a",default_time_title:"Tiempo predeterminado",default_time_prompt:"El tiempo predeterminado se establece para nuevos eventos",set_default_time:"Establecer hora predeterminada",button_edit:"Editar",button_cancel:"Cancelar",button_save:"Ahorrar",button_remove:"Suprimir",guard_yes:"Sí",guard_no:"No",guard_prompt:"¿Estás segura de eliminar?"}}},C={t:{}},I=function(){return C};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;!function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){return e+"º"}};n.default.locale(a,null,!0)}(Y);!function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),i="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),r="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),o="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),s=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function u(e,t,n){var a,i;return"m"===n?t?"минута":"минуту":e+" "+(a=+e,i={mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),a%10==1&&a%100!=11?i[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?i[1]:i[2])}var d=function(e,t){return s.test(t)?a[e.month()]:i[e.month()]};d.s=i,d.f=a;var c=function(e,t){return s.test(t)?r[e.month()]:o[e.month()]};c.s=o,c.f=r;var l={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:d,monthsShort:c,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:u,mm:u,h:"час",hh:u,d:"день",dd:u,M:"месяц",MM:u,y:"год",yy:u},ordinal:function(e){return e},meridiem:function(e){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"}};n.default.locale(l,null,!0)}(Y);var O=function(e){return+Y(e).format("YYYYMMDD")},L=function(e,t){var n=t.split(":");return Y(e).set("hour",+n[0]).set("minute",+n[1]).toDate()};function j(e){e.value=e.value.sort((function(e,t){return e.es_id-t.es_id}))}function H(e,t){return{removeEventAction:function(n){e.value=e.value.filter((function(e){return e.es_id!==n.es_id})),j(e),function(e,t){for(var n=V(t.startsAt,t.finishesAt),a=0;a<=n;a++){x(e,Y(t.startsAt).add(a,"day").toDate(),{es_id:null,editing:!1})}}(t,n)},updateEventInTheState:function(t,n){var a=e.value.find((function(e){return e.es_id===t.es_id}));Object.assign(a,S(S({},t),n))},toggleEventEditAction:function(e,n){N(t,e,n)}}}function V(e,t){return Math.abs(Y(e).diff(t,"days"))}function q(e){return+e<10?"0"+e:e.toString()}function x(e,t,n){var a=t instanceof Date?{monthId:Y(t).format("YYYYMM"),dayId:Y(t).format("DD")}:t,i=e.months.findIndex((function(e){return e.id===a.monthId}));if(e.months[i]){var r=e.months[i].days[+a.dayId-1];Object.assign(r,n)}}function N(e,t,n){for(var a=V(t.startsAt,t.finishesAt),i=0;i<=a;i++){x(e,Y(t.startsAt).add(i,"day").toDate(),n)}}function U(e,t,n,a){var i=function(t){t.startsAt&&t.finishesAt&&N(e,t,{es_id:O(t.startsAt),editing:t.editing||!1})};return{calendarFillEvents:function(){t.value.forEach((function(e){i(e)}))},setEventOnChoosingDays:function(r){var o,s,u=function(e,t){var n,a=""+e.startsAtId.monthId+q(e.startsAtId.dayId),i=""+e.finishesAtId.monthId+q(e.finishesAtId.dayId);return+a>+i&&(a=(n=[i,a])[0],i=n[1]),{id:null,es_id:+a,startsAt:Y(a+""+t.startsAtTime,"YYYYMMDDHH:mm").toDate(),finishesAt:Y(i+""+t.finishesAtTime,"YYYYMMDDHH:mm").toDate(),editing:!0}}(n,r);!function(){for(var t in n)x(e,n[t],{choosing:!1})}(),function(e){Object.assign(e,{startsAtId:null,finishesAtId:null})}(n),o=u.startsAt,s=u.finishesAt,(Y(o).isSame(s,"day")?[o,s]:function(){for(var e=[],t=V(o,s),n=0;n<=t;n++)e.push(Y(o).add(n,"day").toDate());return e}()).some((function(t){var n,a=Y(t).format("YYYYMM"),i=Y(t).format("D"),r=e.months.findIndex((function(e){return e.id===a}));return!!e.months[r]&&!!(null===(n=e.months[r].days[+i-1])||void 0===n?void 0:n.es_id)}))||(t.value.push(u),j(t),i(u),a.value=u)}}}var P={name:"VECDay",props:{day:{type:Object,required:!0},shift:{type:Number,required:!0},monthId:{type:String,required:!0}},setup:function(n){var a=e((function(){var e=(n.day.id+n.shift-1)%7;return 6===e||0===e})),i=t("choosingDatesState"),r=t("focusedEventState"),o=e((function(){var e;return n.day.es_id&&n.day.es_id===(null===(e=r.value)||void 0===e?void 0:e.es_id)}));return{isWeekend:a,clickOnDay:function(){n.day.es_id?r.value={es_id:n.day.es_id}:i.startsAtId?i.finishesAtId={monthId:n.monthId,dayId:n.day.id}:i.startsAtId={monthId:n.monthId,dayId:n.day.id}},isEventFocused:o,isStartDay:e((function(){return n.day.es_id===+(""+n.monthId+q(n.day.id))}))}}};const G=["data-es-id"],W={class:"vec-day__number"};P.render=function(e,t,u,d,c,l){return n(),a("div",{"data-es-id":u.day.es_id,class:i(["vec-day",[{"vec-day_weekend":d.isWeekend,"vec-day_scheduled":u.day.es_id,"vec-day_start-day":d.isStartDay,"vec-day_choosing":u.day.choosing,"vec-day_editing":u.day.editing,"vec-day_focused":d.isEventFocused}]]),onClick:t[0]||(t[0]=r(((...e)=>d.clickOnDay&&d.clickOnDay(...e)),["prevent"]))},[o("div",W,s(u.day.id),1)],10,G)},P.__file="src/components/Day.vue";var B={name:"VECMonth",components:{VecDay:P},props:{month:{type:Object,required:!0}},setup:function(t){var n=t.month;return{monthName:e((function(){var e=Y(n.firstDayOfMonth).format("MMMM YYYY");return e.charAt(0).toUpperCase()+e.slice(1)})),shiftFirstDay:function(){var e=0===Y.localeData().firstDayOfWeek();return"--vec-month-first-day-shift: "+(0===n.shift?e?1:7:n.shift+(e?1:0))}}}};const K={class:"vec-month"},R={class:"vec-month__title"};B.render=function(e,t,i,r,f,m){const _=u("vec-day");return n(),a("div",K,[o("div",R,s(r.monthName),1),o("div",{class:"vec-month__days",style:d(r.shiftFirstDay())},[(n(!0),a(c,null,l(i.month.days,(e=>(n(),v(_,{key:i.month.id+e.id,day:e,shift:i.month.shift,monthId:i.month.id},null,8,["day","shift","monthId"])))),128))],4)])},B.__file="src/components/Month.vue";var $={id:0,es_id:null,editing:!1,choosing:!1};function z(e){return new Date(e.getFullYear(),e.getMonth(),1)}function J(e){return Y(e).format("YYYYMM")}function Q(e,t,n){void 0===e&&(e=[]);var a,i,r,o=(a=t,i=e.length,r=new Date(a.getTime()),new Date(r.setMonth(r.getMonth()+i))),s=function(e){var t=Y(e).daysInMonth();return Array.from({length:t},(function(e,t){return S(S({},$),{id:t+1})}))}(o),u={firstDayOfMonth:o,id:J(o),shift:o.getDay(),days:s};return e.push(u),Y(o).isSame(n,"month")||Q(e,t,n),e}var X=f({name:"VECCalendar",components:{VecMonth:B},setup:function(){var e=t("calendarState"),n=I(),a=[];if(0===Y.localeData().firstDayOfWeek())a=Y.weekdaysMin();else{var i=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],Y.weekdaysMin());i.push(i.shift()),a=i}return{calendarState:e,weekDaysArray:a,addMonthsToCalendar:function(t){e.months=function(e,t,n){var a,i;void 0===n&&(n=2),"after"===t?(a=Y(e.months[e.months.length-1].firstDayOfMonth).add(1,"month"),i=Y(a).add(n,"month")):(i=Y(e.months[0].firstDayOfMonth).add(-1,"month"),a=Y(i).add(-Math.abs(n),"month"));var r=Q([],a.toDate(),i.toDate());return"before"==t?r.concat(e.months):e.months.concat(r)}(e,t).slice()},i18n:n}}});const Z={class:"vec-calendar"},ee={class:"vec-calendar__header"},te={class:"vec-calendar__weekdays"},ne=o("span",{class:"vec-chevron_up"},null,-1),ae=o("span",{class:"vec-chevron_down"},null,-1);X.render=function(e,t,i,r,d,f){const _=u("vec-month");return n(),a("div",Z,[o("div",ee,[o("div",te,[(n(!0),a(c,null,l(e.weekDaysArray,(e=>(n(),a("div",{key:e,class:"vec-calendar__weekday"},s(e),1)))),128))])]),o("button",{class:"vec-months__shift vec-months__shift_before",onClick:t[0]||(t[0]=t=>e.addMonthsToCalendar("before"))},[ne,m(s(e.i18n.t("add_months_before")),1)]),(n(!0),a(c,null,l(e.calendarState.months,(e=>(n(),v(_,{key:e.id,month:e},null,8,["month"])))),128)),o("button",{class:"vec-months__shift vec-months__shift_after",onClick:t[1]||(t[1]=t=>e.addMonthsToCalendar("after"))},[ae,m(s(e.i18n.t("add_months_after")),1)])])},X.__file="src/components/Calendar.vue";var ie=f({name:"VECDefaultTime",setup:function(){var e=t("defaultTimeState");return{i18n:I(),defaultTimeState:e}}});const re={class:"vec-events-default-time"},oe={class:"vec-events-dt__inputs"},se={class:"vec-events-dt__prompt"};ie.render=function(e,t,i,r,u,d){return n(),a("div",re,[o("div",oe,[o("span",null,s(e.i18n.t("default_time_title"))+": ",1),o("span",null,s(e.i18n.t("time_from"))+" ",1),_(o("input",{type:"time","onUpdate:modelValue":t[0]||(t[0]=t=>e.defaultTimeState.startsAtTime=t),class:"vec-event__time-input vec-events-dt__input"},null,512),[[h,e.defaultTimeState.startsAtTime]]),o("span",null,s(e.i18n.t("time_till"))+" ",1),_(o("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=t=>e.defaultTimeState.finishesAtTime=t),class:"vec-event__time-input vec-events-dt__input"},null,512),[[h,e.defaultTimeState.finishesAtTime]])]),o("div",se,s(e.i18n.t("default_time_prompt")),1)])},ie.__file="src/components/DefaultTime.vue";var ue=f({name:"VECGuardAlert",props:{guardAlertConfirm:{type:Function,default:function(){}}},setup:function(){return{i18n:I()}}});const de={class:"vec-guard-alert"},ce={class:"vec-guard-alert__prompt"},le={class:"vec-guard-alert__buttons"};ue.render=function(e,t,i,r,u,d){return n(),a("div",de,[o("div",ce,s(e.i18n.t("guard_prompt")),1),o("div",le,[o("button",{onClick:t[0]||(t[0]=t=>e.guardAlertConfirm("no")),class:"vec-button vec-button_primary-bg"},s(e.i18n.t("guard_no")),1),o("button",{onClick:t[1]||(t[1]=t=>e.guardAlertConfirm("yes")),class:"vec-button vec-button_danger-bg"},s(e.i18n.t("guard_yes")),1)])])},ue.__file="src/components/GuardAlert.vue";var ve=f({name:"VECEvent",components:{VecGuardAlert:ue},props:{event:{type:Object,required:!0},saveEventFn:{type:Function,required:!0},editEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,default:function(){}}},setup:function(n){var a,i=I(),r=t("eventsState"),o=t("calendarState"),s=t("defaultTimeState"),u=t("focusedEventState"),d=H(r,o),c=d.removeEventAction,l=d.toggleEventEditAction,v=d.updateEventInTheState,f=p(Y(n.event.startsAt).format("HH:mm")),m=p(Y(n.event.finishesAt).format("HH:mm")),_=p(n.event.editing),h=p(!1),g=p(!1),b=p(""),E=e((function(){return e=n.event.startsAt,t=n.event.finishesAt,Y(e).isSame(t,"day")?Y(e).format("DD MMMM YYYY"):Y(e).isSame(t,"month")?Y(e).format("DD–")+Y(t).format("DD MMMM YYYY"):Y(e).isSame(t,"year")?Y(e).format("DD MMMM – ")+Y(t).format("DD MMMM YYYY"):Y(e).format("DD MMMM YYYY – ")+Y(t).format("DD MMMM YYYY");var e,t})),M=e((function(){return f.value+"–"+m.value}));y(u,(function(e){h.value=!!e&&e.es_id===n.event.es_id}));var D=e((function(){return f.value!==s.startsAtTime||m.value!==s.finishesAtTime})),A=p(null===(a=n.event)||void 0===a?void 0:a.data),w=p(Math.random()),F=p("hidden");return{i18n:i,eventTimeStartsAt:f,eventTimeFinishesAt:m,formattedDate:E,formattedTime:M,eventData:A,setDefaultTime:function(){f.value=S({},s).startsAtTime,m.value=S({},s).finishesAtTime},isNotDefaultTime:D,isEventEditing:_,isFocused:h,editEvent:function(){n.editEventFn().then((function(){l(n.event,{editing:!0}),_.value=!0})).catch((function(e){console.error(e)}))},cancelEditing:function(){f.value=Y(n.event.startsAt).format("HH:mm"),m.value=Y(n.event.finishesAt).format("HH:mm"),A.value=n.event.data,l(n.event,{editing:!1}),_.value=!1,w.value=Math.random()},saveEvent:function(){g.value=!0;var e={id:void 0===n.event.id?null:n.event.id,startsAt:L(n.event.startsAt,f.value),finishesAt:L(n.event.finishesAt,m.value),data:A.value};n.saveEventFn(e).then((function(t){if(t&&t.error)throw b.value=t.error,new Error(t.error);if(!t||!t.id)throw new Error("Something went wrong: the event was not saved");if(+t.startsAt!=+e.startsAt||+t.finishesAt!=+e.finishesAt){var n=function(e){return Y(e).format("YYYY-MM-DD, HH:mm")},a="Something went wrong: dates was changed. Expected: "+n(e.startsAt)+" and "+n(e.finishesAt)+". Received: "+n(t.startsAt)+", "+n(t.finishesAt);throw b.value=a,new Error(a)}t.es_id=O(t.startsAt),v(t,t),l(t,{editing:!1}),u.value=null,g.value=!1,_.value=!1})).catch((function(e){g.value=!1,_.value=!0,console.error(e)}))},removeEvent:function(){null===n.event.id||void 0===n.event.id?c(n.event):F.value="shown"},loader:g,guardAlertState:F,guardAlertConfirm:function(){return function(e){return k(this,void 0,void 0,(function(){return T(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),"yes"===e?n.removeEventFn(n.event).then((function(){c(n.event)})).catch((function(e){console.error(e)})):F.value="hidden",[2]}}))}))}},serverError:b,forceUpdateKey:w}}});const fe=["id"],me={key:0,class:"vec-event-loader__wrapper"},_e=[o("div",{class:"vec-loader"},null,-1)],he={class:"vec-event__header"},pe={class:"vec-event__dates"},ye={key:2,class:"vec-event__set-time"},ge={key:4,class:"vec-event__server-error"},be={class:"vec-event__footer"};ve.render=function(e,t,d,c,l,f){const m=u("VecGuardAlert");return n(),a("div",{key:e.forceUpdateKey,id:`vec-es-id-${e.event.es_id}`,class:i(["vec-event",{"vec-event_focused":e.isFocused,"vec-event_editing":e.isEventEditing}])},[e.loader?(n(),a("div",me,_e)):g("v-if",!0),"shown"===e.guardAlertState?(n(),v(m,{key:1,guardAlertConfirm:e.guardAlertConfirm()},null,8,["guardAlertConfirm"])):g("v-if",!0),o("header",he,[o("div",pe,s(e.formattedDate)+", "+s(e.formattedTime),1)]),e.isEventEditing?(n(),a("div",ye,[o("span",null,s(e.i18n.t("time_from"))+" ",1),_(o("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":t[0]||(t[0]=t=>e.eventTimeStartsAt=t)},null,512),[[h,e.eventTimeStartsAt]]),o("span",null,s(e.i18n.t("time_till"))+" ",1),_(o("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":t[1]||(t[1]=t=>e.eventTimeFinishesAt=t)},null,512),[[h,e.eventTimeFinishesAt]]),e.isNotDefaultTime?(n(),a("button",{key:0,onClick:t[2]||(t[2]=(...t)=>e.setDefaultTime&&e.setDefaultTime(...t)),class:"vec-button vec-button_primary-bg"},s(e.i18n.t("set_default_time")),1)):g("v-if",!0)])):g("v-if",!0),e.eventComponent&&Object.keys(e.eventComponent).length?(n(),v(b(e.eventComponent),{key:3,isEventEditing:e.isEventEditing,eventData:e.eventData,"onUpdate:eventData":t[3]||(t[3]=t=>e.eventData=t)},null,8,["isEventEditing","eventData"])):g("v-if",!0),e.serverError?(n(),a("div",ge,s(e.serverError),1)):g("v-if",!0),o("footer",be,[o("button",{class:"vec-button vec-button_danger-bg",onClick:t[4]||(t[4]=r(((...t)=>e.removeEvent&&e.removeEvent(...t)),["prevent"]))},s(e.i18n.t("button_remove")),1),e.isEventEditing?(n(),a("button",{key:0,onClick:t[5]||(t[5]=r(((...t)=>e.cancelEditing&&e.cancelEditing(...t)),["prevent"])),class:"vec-button vec-button_outline"},s(e.i18n.t("button_cancel")),1)):g("v-if",!0),o("button",{class:"vec-button vec-button_primary-bg",onClick:t[6]||(t[6]=r((t=>e.isEventEditing?e.saveEvent():e.editEvent()),["prevent"]))},s(e.isEventEditing?e.i18n.t("button_save"):e.i18n.t("button_edit")),1)])],10,fe)},ve.__file="src/components/Event.vue";var Ee=f({name:"VECEvents",components:{VecDefaultTimeComponent:ie,VecEventComponent:ve},props:{editEventFn:{type:Function,required:!0},saveEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,required:!0}},setup:function(){var e=t("eventsState"),n=t("focusedEventState");return y(n,(function(e){e&&E((function(){var t=document.getElementById("vec-es-id-"+e.es_id);null==t||t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))})),{events:e}}});const Me={class:"vec-events__wrapper"},De={class:"vec-events"};Ee.render=function(e,t,i,r,s,d){const f=u("vec-default-time-component"),m=u("vec-event-component");return n(),a("div",Me,[M(f),o("div",De,[(n(!0),a(c,null,l(e.events,(t=>(n(),v(m,{key:`es-id-${t.es_id}`,event:t,saveEventFn:e.saveEventFn,editEventFn:e.editEventFn,removeEventFn:e.removeEventFn,eventComponent:e.eventComponent},null,8,["event","saveEventFn","editEventFn","removeEventFn","eventComponent"])))),128))])])},Ee.__file="src/components/Events.vue";var Ae=f({name:"VueEventCreator",components:{VecCalendar:X,VecEvents:Ee},props:{language:{type:String,default:"en"},firstDate:{type:Date,default:new Date},defaultTime:{type:Object,default:function(){return{startsAtTime:"10:00",finishesAtTime:"17:00"}}},monthsOnPage:{type:Number,default:3},editEventFn:{type:Function,default:function(e){return k(void 0,void 0,void 0,(function(){return T(this,(function(e){return[2]}))}))}},saveEventFn:{type:Function,default:function(e){return k(void 0,void 0,void 0,(function(){return T(this,(function(e){return[2]}))}))}},removeEventFn:{type:Function,default:function(e){return k(void 0,void 0,void 0,(function(){return T(this,(function(e){return[2]}))}))}},eventComponent:{type:Object,default:{}},getEventsFn:{type:Function,default:function(){return k(void 0,void 0,void 0,(function(){return T(this,(function(e){return[2,[]]}))}))}}},setup:function(e){var t,n,a=p(!0),i=p(!1),r=D({months:[]}),o=p([]),s=D({startsAtId:null,finishesAtId:null}),u=D(e.defaultTime);t=e.language,n=F.messages[t],C.t=function(e){return n[e]?n[e]:"translation missing: '"+e+"'"},function(e){Y.locale(e),Y.extend(w),Y.localeData()}(e.language);var d=p(null),c=U(r,o,s,d),l=c.calendarFillEvents,v=c.setEventOnChoosingDays;return e.getEventsFn().then((function(t){o.value=t.map((function(e){return e.es_id=O(e.startsAt),e})),j(o),r.months=function(e,t,n){var a,i;if(t.length){var r=Y(t[0].startsAt).isAfter(e,"month")&&Y(t[0].startsAt).isBefore(Y(e).add(3,"month"),"month")?e:t[0].startsAt;a=new Date(z(r));var o=t[t.length-1].finishesAt;i=Math.abs(Y(r).diff(o,"month"))>n?new Date(z(o)):Y(r).add(n,"month").toDate()}else a=new Date(z(e)),i=Y(e).add(n-1,"month").toDate();return Q([],a,i)}(e.firstDate,o.value,e.monthsOnPage),l(),a.value=!1})),y(s,(function(e){if(e)if(e.finishesAtId)v(u);else if(e.startsAtId){x(r,e.startsAtId,{choosing:!0});var t=function(n){document.body.removeEventListener("click",t),n.target.classList.contains("vec-day__number")||n.target.classList.contains("vec-day")||(x(r,e.startsAtId,{choosing:!1}),s.startsAtId=null)};setTimeout((function(){document.body.addEventListener("click",t)}))}})),y(d,(function(e){if(e){var t,n,a=(t=e.es_id,n=function(e){var a=e.target.classList.contains("vec-day__number")?e.target.parentElement:e.target,i=Array.from(document.querySelectorAll('[data-es-id="'+t+'"]'));if(i.length){for(var r=!1,o=0,s=i;o<s.length;o++)if(s[o]===a){r=!0;break}r||(document.body.removeEventListener("click",n),a.hasAttribute("data-es-id")||(d.value=null))}else document.body.removeEventListener("click",n)});setTimeout((function(){document.body.addEventListener("click",a)}))}})),A("calendarState",r),A("eventsState",o),A("choosingDatesState",s),A("focusedEventState",d),A("defaultTimeState",u),{calendarState:r,loader:a,isSwitcherOn:i}}});const Ye={key:0,class:"vec-loader__wrapper"},we=[o("div",{class:"vec-loader"},null,-1)],Se={key:1,class:"vec-body"};Ae.render=function(e,t,r,s,d,c){const l=u("vec-calendar"),v=u("vec-events");return e.loader?(n(),a("div",Ye,we)):(n(),a("div",Se,[o("div",{class:i(["vec-calendar__switcher",{"vec-calendar__switcher_on":e.isSwitcherOn}]),onClick:t[0]||(t[0]=t=>e.isSwitcherOn=!e.isSwitcherOn)},[o("div",{class:i(["vec-chevron_l",{"vec-chevron_l-left":e.isSwitcherOn}])},null,2)],2),M(l,{firstDate:e.firstDate,monthsOnPage:e.monthsOnPage},null,8,["firstDate","monthsOnPage"]),M(v,{saveEventFn:e.saveEventFn,editEventFn:e.editEventFn,removeEventFn:e.removeEventFn,eventComponent:e.eventComponent},null,8,["saveEventFn","editEventFn","removeEventFn","eventComponent"])]))},Ae.__file="src/VueEventCreator.vue";export{Ae as default};

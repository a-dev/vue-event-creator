import{computed as e,inject as t,openBlock as n,createBlock as a,withModifiers as i,createVNode as r,toDisplayString as o,resolveComponent as s,Fragment as u,renderList as d,defineComponent as c,createTextVNode as l,withDirectives as v,vModelText as f,ref as m,watch as _,createCommentVNode as h,resolveDynamicComponent as p,nextTick as y,reactive as g,provide as b}from"vue";import E from"dayjs";import M from"dayjs/plugin/localeData";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D=function(){return(D=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function A(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{u(a.next(e))}catch(e){r(e)}}function s(e){try{u(a.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((a=a.apply(e,t||[])).next())}))}function Y(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var S={messages:{en:{add_months_before:"More before",add_months_after:"More after",time_from:"from",time_till:"till",default_time_title:"Default time",default_time_prompt:"The default time sets for new events",set_default_time:"Set default time",button_edit:"Edit",button_cancel:"Cancel",button_save:"Save",button_remove:"Remove",guard_yes:"Yes",guard_no:"No",guard_prompt:"Are you sure?"},ru:{add_months_before:"Еще месяцы",add_months_after:"Еще месяцы",time_from:"с",time_till:"по",default_time_title:"Время",default_time_prompt:"Время по умолчанию для новых событий",set_default_time:"Поставить время по умолчанию",button_edit:"Редактировать",button_cancel:"Отменить",button_save:"Сохранить",button_remove:"Удалить",guard_yes:"Да",guard_no:"Нет",guard_prompt:"Вы уверены, что хотите удалить событие?"},es:{add_months_before:"Más antes",add_months_after:"Mas despues",time_from:"del",time_till:"a",default_time_title:"Tiempo predeterminado",default_time_prompt:"El tiempo predeterminado se establece para nuevos eventos",set_default_time:"Establecer hora predeterminada",button_edit:"Editar",button_cancel:"Cancelar",button_save:"Ahorrar",button_remove:"Suprimir",guard_yes:"Sí",guard_no:"No",guard_prompt:"¿Estás segura de eliminar?"}}},w={t:{}},k=function(){return w};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;!function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){return e+"º"}};n.default.locale(a,null,!0)}(E);!function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),i="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),r="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),o="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),s=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function u(e,t,n){var a,i;return"m"===n?t?"минута":"минуту":e+" "+(a=+e,i={mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),a%10==1&&a%100!=11?i[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?i[1]:i[2])}var d=function(e,t){return s.test(t)?a[e.month()]:i[e.month()]};d.s=i,d.f=a;var c=function(e,t){return s.test(t)?r[e.month()]:o[e.month()]};c.s=o,c.f=r;var l={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:d,monthsShort:c,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:u,mm:u,h:"час",hh:u,d:"день",dd:u,M:"месяц",MM:u,y:"год",yy:u},ordinal:function(e){return e},meridiem:function(e){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"}};n.default.locale(l,null,!0)}(E);var T=function(e){return+E(e).format("YYYYMMDD")},F=function(e,t){var n=t.split(":");return E(e).set("hour",+n[0]).set("minute",+n[1]).toDate()};function C(e){e.value=e.value.sort((function(e,t){return e.es_id-t.es_id}))}function I(e,t){return{removeEventAction:function(n){e.value=e.value.filter((function(e){return e.es_id!==n.es_id})),C(e),function(e,t){for(var n=O(t.startsAt,t.finishesAt),a=0;a<=n;a++){j(e,E(t.startsAt).add(a,"day").toDate(),{es_id:null,editing:!1})}}(t,n)},updateEventInTheState:function(t,n){var a=e.value.find((function(e){return e.es_id===t.es_id}));Object.assign(a,D(D({},t),n))},toggleEventEditAction:function(e,n){H(t,e,n)}}}function O(e,t){return Math.abs(E(e).diff(t,"days"))}function L(e){return+e<10?"0"+e:e.toString()}function j(e,t,n){var a=t instanceof Date?{monthId:E(t).format("YYYYMM"),dayId:E(t).format("DD")}:t,i=e.months.findIndex((function(e){return e.id===a.monthId}));if(e.months[i]){var r=e.months[i].days[+a.dayId-1];Object.assign(r,n)}}function H(e,t,n){for(var a=O(t.startsAt,t.finishesAt),i=0;i<=a;i++){j(e,E(t.startsAt).add(i,"day").toDate(),n)}}function V(e,t,n,a){var i=function(t){t.startsAt&&t.finishesAt&&H(e,t,{es_id:T(t.startsAt),editing:t.editing||!1})};return{calendarFillEvents:function(){t.value.forEach((function(e){i(e)}))},setEventOnChoosingDays:function(r){var o,s,u=function(e,t){var n,a=""+e.startsAtId.monthId+L(e.startsAtId.dayId),i=""+e.finishesAtId.monthId+L(e.finishesAtId.dayId);return+a>+i&&(a=(n=[i,a])[0],i=n[1]),{id:null,es_id:+a,startsAt:E(a+""+t.startsAtTime,"YYYYMMDDHH:mm").toDate(),finishesAt:E(i+""+t.finishesAtTime,"YYYYMMDDHH:mm").toDate(),editing:!0}}(n,r);!function(){for(var t in n)j(e,n[t],{choosing:!1})}(),function(e){Object.assign(e,{startsAtId:null,finishesAtId:null})}(n),o=u.startsAt,s=u.finishesAt,(E(o).isSame(s,"day")?[o,s]:function(){for(var e=[],t=O(o,s),n=0;n<=t;n++)e.push(E(o).add(n,"day").toDate());return e}()).some((function(t){var n,a=E(t).format("YYYYMM"),i=E(t).format("D"),r=e.months.findIndex((function(e){return e.id===a}));return!!e.months[r]&&!!(null===(n=e.months[r].days[+i-1])||void 0===n?void 0:n.es_id)}))||(t.value.push(u),C(t),i(u),a.value=u)}}}var q={name:"VECDay",props:{day:{type:Object,required:!0},shift:{type:Number,required:!0},monthId:{type:String,required:!0}},setup:function(n){var a=e((function(){var e=(n.day.id+n.shift-1)%7;return 6===e||0===e})),i=t("choosingDatesState"),r=t("focusedEventState"),o=e((function(){var e;return n.day.es_id&&n.day.es_id===(null===(e=r.value)||void 0===e?void 0:e.es_id)}));return{isWeekend:a,clickOnDay:function(){n.day.es_id?r.value={es_id:n.day.es_id}:i.startsAtId?i.finishesAtId={monthId:n.monthId,dayId:n.day.id}:i.startsAtId={monthId:n.monthId,dayId:n.day.id}},isEventFocused:o,isStartDay:e((function(){return n.day.es_id===+(""+n.monthId+L(n.day.id))}))}}};const x={class:"vec-day__number"};q.render=function(e,t,s,u,d,c){return n(),a("div",{"data-es-id":s.day.es_id,class:["vec-day",[{"vec-day_weekend":u.isWeekend,"vec-day_scheduled":s.day.es_id,"vec-day_start-day":u.isStartDay,"vec-day_choosing":s.day.choosing,"vec-day_editing":s.day.editing,"vec-day_focused":u.isEventFocused}]],onClick:t[1]||(t[1]=i(((...e)=>u.clickOnDay&&u.clickOnDay(...e)),["prevent"]))},[r("div",x,o(s.day.id),1)],10,["data-es-id"])},q.__file="src/components/Day.vue";var N={name:"VECMonth",components:{VecDay:q},props:{month:{type:Object,required:!0}},setup:function(t){var n=t.month;return{monthName:e((function(){var e=E(n.firstDayOfMonth).format("MMMM YYYY");return e.charAt(0).toUpperCase()+e.slice(1)})),shiftFirstDay:function(){var e=0===E.localeData().firstDayOfWeek();return"--vec-month-first-day-shift: "+(0===n.shift?e?1:7:n.shift+(e?1:0))}}}};const U={class:"vec-month"},P={class:"vec-month__title"};N.render=function(e,t,i,c,l,v){const f=s("vec-day");return n(),a("div",U,[r("div",P,o(c.monthName),1),r("div",{class:"vec-month__days",style:c.shiftFirstDay()},[(n(!0),a(u,null,d(i.month.days,(e=>(n(),a(f,{key:i.month.id+e.id,day:e,shift:i.month.shift,monthId:i.month.id},null,8,["day","shift","monthId"])))),128))],4)])},N.__file="src/components/Month.vue";var G={id:0,es_id:null,editing:!1,choosing:!1};function W(e){return new Date(e.getFullYear(),e.getMonth(),1)}function B(e){return E(e).format("YYYYMM")}function K(e,t,n){void 0===e&&(e=[]);var a,i,r,o=(a=t,i=e.length,r=new Date(a.getTime()),new Date(r.setMonth(r.getMonth()+i))),s=function(e){var t=E(e).daysInMonth();return Array.from({length:t},(function(e,t){return D(D({},G),{id:t+1})}))}(o),u={firstDayOfMonth:o,id:B(o),shift:o.getDay(),days:s};return e.push(u),E(o).isSame(n,"month")||K(e,t,n),e}var R=c({name:"VECCalendar",components:{VecMonth:N},setup:function(){var e=t("calendarState"),n=k(),a=[];if(0===E.localeData().firstDayOfWeek())a=E.weekdaysMin();else{var i=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||t)}([],E.weekdaysMin());i.push(i.shift()),a=i}return{calendarState:e,weekDaysArray:a,addMonthsToCalendar:function(t){e.months=function(e,t,n){var a,i;void 0===n&&(n=2),"after"===t?(a=E(e.months[e.months.length-1].firstDayOfMonth).add(1,"month"),i=E(a).add(n,"month")):(i=E(e.months[0].firstDayOfMonth).add(-1,"month"),a=E(i).add(-Math.abs(n),"month"));var r=K([],a.toDate(),i.toDate());return"before"==t?r.concat(e.months):e.months.concat(r)}(e,t).slice()},i18n:n}}});const $={class:"vec-calendar"},z={class:"vec-calendar__header"},J={class:"vec-calendar__weekdays"},Q=r("span",{class:"vec-chevron_up"},null,-1),X=r("span",{class:"vec-chevron_down"},null,-1);R.render=function(e,t,i,c,v,f){const m=s("vec-month");return n(),a("div",$,[r("div",z,[r("div",J,[(n(!0),a(u,null,d(e.weekDaysArray,(e=>(n(),a("div",{key:e,class:"vec-calendar__weekday"},o(e),1)))),128))])]),r("button",{class:"vec-months__shift vec-months__shift_before",onClick:t[1]||(t[1]=t=>e.addMonthsToCalendar("before"))},[Q,l(o(e.i18n.t("add_months_before")),1)]),(n(!0),a(u,null,d(e.calendarState.months,(e=>(n(),a(m,{key:e.id,month:e},null,8,["month"])))),128)),r("button",{class:"vec-months__shift vec-months__shift_after",onClick:t[2]||(t[2]=t=>e.addMonthsToCalendar("after"))},[X,l(o(e.i18n.t("add_months_after")),1)])])},R.__file="src/components/Calendar.vue";var Z=c({name:"VECDefaultTime",setup:function(){var e=t("defaultTimeState");return{i18n:k(),defaultTimeState:e}}});const ee={class:"vec-events-default-time"},te={class:"vec-events-dt__inputs"},ne={class:"vec-events-dt__prompt"};Z.render=function(e,t,i,s,u,d){return n(),a("div",ee,[r("div",te,[r("span",null,o(e.i18n.t("default_time_title"))+": ",1),r("span",null,o(e.i18n.t("time_from"))+" ",1),v(r("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=t=>e.defaultTimeState.startsAtTime=t),class:"vec-event__time-input vec-events-dt__input"},null,512),[[f,e.defaultTimeState.startsAtTime]]),r("span",null,o(e.i18n.t("time_till"))+" ",1),v(r("input",{type:"time","onUpdate:modelValue":t[2]||(t[2]=t=>e.defaultTimeState.finishesAtTime=t),class:"vec-event__time-input vec-events-dt__input"},null,512),[[f,e.defaultTimeState.finishesAtTime]])]),r("div",ne,o(e.i18n.t("default_time_prompt")),1)])},Z.__file="src/components/DefaultTime.vue";var ae=c({name:"VECGuardAlert",props:{prompt:{type:String,default:"Are you sure?"},guardAlertConfirm:{type:Function,default:function(){}}},setup:function(){return{i18n:k()}}});const ie={class:"vec-guard-alert"},re={class:"vec-guard-alert__prompt"},oe={class:"vec-guard-alert__buttons"};ae.render=function(e,t,i,s,u,d){return n(),a("div",ie,[r("div",re,o(e.i18n.t("guard_prompt")),1),r("div",oe,[r("button",{onClick:t[1]||(t[1]=t=>e.guardAlertConfirm("no")),class:"vec-button vec-button_primary-bg"},o(e.i18n.t("guard_no")),1),r("button",{onClick:t[2]||(t[2]=t=>e.guardAlertConfirm("yes")),class:"vec-button vec-button_danger-bg"},o(e.i18n.t("guard_yes")),1)])])},ae.__file="src/components/GuardAlert.vue";var se=c({name:"VECEvent",components:{VecGuardAlert:ae},props:{event:{type:Object,required:!0},saveEventFn:{type:Function,required:!0},editEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,default:function(){}}},setup:function(n){var a,i=k(),r=t("eventsState"),o=t("calendarState"),s=t("defaultTimeState"),u=t("focusedEventState"),d=I(r,o),c=d.removeEventAction,l=d.toggleEventEditAction,v=d.updateEventInTheState,f=m(E(n.event.startsAt).format("HH:mm")),h=m(E(n.event.finishesAt).format("HH:mm")),p=m(n.event.editing),y=m(!1),g=m(!1),b=m(""),M=e((function(){return e=n.event.startsAt,t=n.event.finishesAt,E(e).isSame(t,"day")?E(e).format("DD MMMM YYYY"):E(e).isSame(t,"month")?E(e).format("DD–")+E(t).format("DD MMMM YYYY"):E(e).isSame(t,"year")?E(e).format("DD MMMM – ")+E(t).format("DD MMMM YYYY"):E(e).format("DD MMMM YYYY – ")+E(t).format("DD MMMM YYYY");var e,t})),S=e((function(){return f.value+"–"+h.value}));_(u,(function(e){y.value=!!e&&e.es_id===n.event.es_id}));var w=e((function(){return f.value!==s.startsAtTime||h.value!==s.finishesAtTime})),C=m(null===(a=n.event)||void 0===a?void 0:a.data),O=m(Math.random()),L=m("hidden");return{i18n:i,eventTimeStartsAt:f,eventTimeFinishesAt:h,formattedDate:M,formattedTime:S,eventData:C,setDefaultTime:function(){f.value=D({},s).startsAtTime,h.value=D({},s).finishesAtTime},isNotDefaultTime:w,isEventEditing:p,isFocused:y,editEvent:function(){n.editEventFn().then((function(){l(n.event,{editing:!0}),p.value=!0})).catch((function(e){console.error(e)}))},cancelEditing:function(){f.value=E(n.event.startsAt).format("HH:mm"),h.value=E(n.event.finishesAt).format("HH:mm"),C.value=n.event.data,l(n.event,{editing:!1}),p.value=!1,O.value=Math.random()},saveEvent:function(){g.value=!0;var e={id:void 0===n.event.id?null:n.event.id,startsAt:F(n.event.startsAt,f.value),finishesAt:F(n.event.finishesAt,h.value),data:C.value};n.saveEventFn(e).then((function(t){if(t&&t.error)throw b.value=t.error,new Error(t.error);var n=t&&t.id?t:e;if(+n.startsAt!=+e.startsAt||+n.finishesAt!=+e.finishesAt){var a=function(e){return E(e).format("YYYY-MM-DD, HH:mm")},i="Something goes wrong: dates was changed. Expected: "+a(e.startsAt)+" and "+a(e.finishesAt)+". Received: "+a(n.startsAt)+", "+a(n.finishesAt);throw b.value=i,new Error(i)}n.es_id=T(n.startsAt),v(n,n),l(n,{editing:!1}),u.value=null,g.value=!1,p.value=!1})).catch((function(e){g.value=!1,p.value=!0,console.error(e)}))},removeEvent:function(){null===n.event.id||void 0===n.event.id?c(n.event):L.value="shown"},loader:g,guardAlertState:L,guardAlertConfirm:function(){return function(e){return A(this,void 0,void 0,(function(){return Y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),"yes"===e?n.removeEventFn(n.event).then((function(){c(n.event)})).catch((function(e){console.error(e)})):L.value="hidden",[2]}}))}))}},serverError:b,forceUpdateKey:O}}});const ue={key:0,class:"vec-event-loader__wrapper"},de=r("div",{class:"vec-loader"},null,-1),ce={class:"vec-event__header"},le={class:"vec-event__dates"},ve={key:2,class:"vec-event__set-time"},fe={key:4,class:"vec-event__server-error"},me={class:"vec-event__footer"};se.render=function(e,t,u,d,c,l){const m=s("VecGuardAlert");return n(),a("div",{key:e.forceUpdateKey,id:`vec-es-id-${e.event.es_id}`,class:["vec-event",{"vec-event_focused":e.isFocused,"vec-event_editing":e.isEventEditing}]},[e.loader?(n(),a("div",ue,[de])):h("v-if",!0),"shown"===e.guardAlertState?(n(),a(m,{key:1,guardAlertConfirm:e.guardAlertConfirm()},null,8,["guardAlertConfirm"])):h("v-if",!0),r("header",ce,[r("div",le,o(e.formattedDate)+", "+o(e.formattedTime),1)]),e.isEventEditing?(n(),a("div",ve,[r("span",null,o(e.i18n.t("time_from"))+" ",1),v(r("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":t[1]||(t[1]=t=>e.eventTimeStartsAt=t)},null,512),[[f,e.eventTimeStartsAt]]),r("span",null,o(e.i18n.t("time_till"))+" ",1),v(r("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":t[2]||(t[2]=t=>e.eventTimeFinishesAt=t)},null,512),[[f,e.eventTimeFinishesAt]]),e.isNotDefaultTime?(n(),a("button",{key:0,onClick:t[3]||(t[3]=(...t)=>e.setDefaultTime&&e.setDefaultTime(...t)),class:"vec-button vec-button_primary-bg"},o(e.i18n.t("set_default_time")),1)):h("v-if",!0)])):h("v-if",!0),e.eventComponent&&Object.keys(e.eventComponent).length?(n(),a(p(e.eventComponent),{key:3,isEventEditing:e.isEventEditing,eventData:e.eventData,"onUpdate:eventData":t[4]||(t[4]=t=>e.eventData=t)},null,8,["isEventEditing","eventData"])):h("v-if",!0),e.serverError?(n(),a("div",fe,o(e.serverError),1)):h("v-if",!0),r("footer",me,[r("button",{class:"vec-button vec-button_danger-bg",onClick:t[5]||(t[5]=i(((...t)=>e.removeEvent&&e.removeEvent(...t)),["prevent"]))},o(e.i18n.t("button_remove")),1),e.isEventEditing?(n(),a("button",{key:0,onClick:t[6]||(t[6]=i(((...t)=>e.cancelEditing&&e.cancelEditing(...t)),["prevent"])),class:"vec-button vec-button_outline"},o(e.i18n.t("button_cancel")),1)):h("v-if",!0),r("button",{class:"vec-button vec-button_primary-bg",onClick:t[7]||(t[7]=i((t=>e.isEventEditing?e.saveEvent():e.editEvent()),["prevent"]))},o(e.isEventEditing?e.i18n.t("button_save"):e.i18n.t("button_edit")),1)])],10,["id"])},se.__file="src/components/Event.vue";var _e=c({name:"VECEvents",components:{VecDefaultTimeComponent:Z,VecEventComponent:se},props:{editEventFn:{type:Function,required:!0},saveEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,required:!0}},setup:function(){var e=t("eventsState"),n=t("focusedEventState");return _(n,(function(e){e&&y((function(){var t=document.getElementById("vec-es-id-"+e.es_id);null==t||t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))})),{events:e}}});const he={class:"vec-events__wrapper"},pe={class:"vec-events"};_e.render=function(e,t,i,o,c,l){const v=s("vec-default-time-component"),f=s("vec-event-component");return n(),a("div",he,[r(v),r("div",pe,[(n(!0),a(u,null,d(e.events,(t=>(n(),a(f,{key:`es-id-${t.es_id}`,event:t,saveEventFn:e.saveEventFn,editEventFn:e.editEventFn,removeEventFn:e.removeEventFn,eventComponent:e.eventComponent},null,8,["event","saveEventFn","editEventFn","removeEventFn","eventComponent"])))),128))])])},_e.__file="src/components/Events.vue";var ye=c({name:"VueEventCreator",components:{VecCalendar:R,VecEvents:_e},props:{language:{type:String,default:"en"},firstDate:{type:Date,default:new Date},defaultTime:{type:Object,default:function(){return{startsAtTime:"10:00",finishesAtTime:"17:00"}}},monthsOnPage:{type:Number,default:3},editEventFn:{type:Function,default:function(e){return A(void 0,void 0,void 0,(function(){return Y(this,(function(e){return[2]}))}))}},saveEventFn:{type:Function,default:function(e){return A(void 0,void 0,void 0,(function(){return Y(this,(function(e){return[2]}))}))}},removeEventFn:{type:Function,default:function(e){return A(void 0,void 0,void 0,(function(){return Y(this,(function(e){return[2]}))}))}},eventComponent:{type:Object,default:{}},getEventsFn:{type:Function,default:function(){return A(void 0,void 0,void 0,(function(){return Y(this,(function(e){return[2,[]]}))}))}}},setup:function(e){var t,n,a=m(!0),i=m(!1),r=g({months:[]}),o=m([]),s=g({startsAtId:null,finishesAtId:null}),u=g(e.defaultTime);t=e.language,n=S.messages[t],w.t=function(e){return n[e]?n[e]:"translation missing '"+e+"'"},function(e){E.locale(e),E.extend(M),E.localeData()}(e.language);var d=m(null),c=V(r,o,s,d),l=c.calendarFillEvents,v=c.setEventOnChoosingDays;return e.getEventsFn().then((function(t){o.value=t.map((function(e){return e.es_id=T(e.startsAt),e})),C(o),r.months=function(e,t,n){var a,i;if(t.length){var r=E(t[0].startsAt).isAfter(e,"month")&&E(t[0].startsAt).isBefore(E(e).add(3,"month"),"month")?e:t[0].startsAt;a=new Date(W(r));var o=t[t.length-1].finishesAt;i=Math.abs(E(r).diff(o,"month"))>n?new Date(W(o)):E(r).add(n,"month").toDate()}else a=new Date(W(e)),i=E(e).add(n-1,"month").toDate();return K([],a,i)}(e.firstDate,o.value,e.monthsOnPage),l(),a.value=!1})),_(s,(function(e){if(e)if(e.finishesAtId)v(u);else if(e.startsAtId){j(r,e.startsAtId,{choosing:!0});var t=function(n){document.body.removeEventListener("click",t),n.target.classList.contains("vec-day__number")||n.target.classList.contains("vec-day")||(j(r,e.startsAtId,{choosing:!1}),s.startsAtId=null)};setTimeout((function(){document.body.addEventListener("click",t)}))}})),_(d,(function(e){if(e){var t,n,a=(t=e.es_id,n=function(e){var a=e.target.classList.contains("vec-day__number")?e.target.parentElement:e.target,i=Array.from(document.querySelectorAll('[data-es-id="'+t+'"]'));if(i.length){for(var r=!1,o=0,s=i;o<s.length;o++)if(s[o]===a){r=!0;break}r||(document.body.removeEventListener("click",n),a.hasAttribute("data-es-id")||(d.value=null))}else document.body.removeEventListener("click",n)});setTimeout((function(){document.body.addEventListener("click",a)}))}})),b("calendarState",r),b("eventsState",o),b("choosingDatesState",s),b("focusedEventState",d),b("defaultTimeState",u),{calendarState:r,loader:a,isSwitcherOn:i}}});const ge={key:0,class:"vec-loader__wrapper"},be=r("div",{class:"vec-loader"},null,-1),Ee={key:1,class:"vec-body"};ye.render=function(e,t,i,o,u,d){const c=s("vec-calendar"),l=s("vec-events");return e.loader?(n(),a("div",ge,[be])):(n(),a("div",Ee,[r("div",{class:["vec-calendar__switcher",{"vec-calendar__switcher_on":e.isSwitcherOn}],onClick:t[1]||(t[1]=t=>e.isSwitcherOn=!e.isSwitcherOn)},[r("div",{class:["vec-chevron_l",{"vec-chevron_l-left":e.isSwitcherOn}]},null,2)],2),r(c,{firstDate:e.firstDate,monthsOnPage:e.monthsOnPage},null,8,["firstDate","monthsOnPage"]),r(l,{saveEventFn:e.saveEventFn,editEventFn:e.editEventFn,removeEventFn:e.removeEventFn,eventComponent:e.eventComponent},null,8,["saveEventFn","editEventFn","removeEventFn","eventComponent"])]))},ye.__file="src/VueEventCreator.vue";export default ye;

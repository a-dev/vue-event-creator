var VueEventCreator=function(e,t,n){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=a(t),r=a(n),i=function(){return(i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{d(a.next(e))}catch(e){r(e)}}function s(e){try{d(a.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}d((a=a.apply(e,t||[])).next())}))}function d(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var l={messages:{en:{add_months_before:"More before",add_months_after:"More after",time_from:"from",time_till:"till",default_time_title:"Default time",default_time_prompt:"The default time sets for new events",set_default_time:"Set default time",button_edit:"Edit",button_cancel:"Cancel",button_save:"Save",button_remove:"Remove",guard_yes:"Yes",guard_no:"No",guard_prompt:"Are you sure?"},ru:{add_months_before:"Еще месяцы",add_months_after:"Еще месяцы",time_from:"с",time_till:"по",default_time_title:"Время",default_time_prompt:"Время по умолчанию для новых событий",set_default_time:"Поставить время по умолчанию",button_edit:"Редактировать",button_cancel:"Отменить",button_save:"Сохранить",button_remove:"Удалить",guard_yes:"Да",guard_no:"Нет",guard_prompt:"Вы уверены, что хотите удалить событие?"},es:{add_months_before:"Más antes",add_months_after:"Mas despues",time_from:"del",time_till:"a",default_time_title:"Tiempo predeterminado",default_time_prompt:"El tiempo predeterminado se establece para nuevos eventos",set_default_time:"Establecer hora predeterminada",button_edit:"Editar",button_cancel:"Cancelar",button_save:"Ahorrar",button_remove:"Suprimir",guard_yes:"Sí",guard_no:"No",guard_prompt:"¿Estás segura de eliminar?"}}},c={t:{}},u=function(){return c};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;(function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){return e+"º"}};n.default.locale(a,null,!0)})(o.default);!function(e,t){e.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),r="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),i="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),s=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function d(e,t,n){var a,o;return"m"===n?t?"минута":"минуту":e+" "+(a=+e,o={mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),a%10==1&&a%100!=11?o[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?o[1]:o[2])}var l=function(e,t){return s.test(t)?a[e.month()]:o[e.month()]};l.s=o,l.f=a;var c=function(e,t){return s.test(t)?r[e.month()]:i[e.month()]};c.s=i,c.f=r;var u={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:l,monthsShort:c,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:d,mm:d,h:"час",hh:d,d:"день",dd:d,M:"месяц",MM:d,y:"год",yy:d},ordinal:function(e){return e},meridiem:function(e){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"}};return n.default.locale(u,null,!0),u}(o.default)}({exports:{}});var v=function(e){return+o.default(e).format("YYYYMMDD")},m=function(e,t){var n=t.split(":");return o.default(e).set("hour",+n[0]).set("minute",+n[1]).toDate()};function f(e){e.value=e.value.sort((function(e,t){return e.es_id-t.es_id}))}function _(e,t){return{removeEventAction:function(n){e.value=e.value.filter((function(e){return e.es_id!==n.es_id})),f(e),function(e,t){for(var n=p(t.startsAt,t.finishesAt),a=0;a<=n;a++){y(e,o.default(t.startsAt).add(a,"day").toDate(),{es_id:null,editing:!1})}}(t,n)},updateEventInTheState:function(t,n){var a=e.value.find((function(e){return e.es_id===t.es_id}));Object.assign(a,i(i({},t),n))},toggleEventEditAction:function(e,n){E(t,e,n)}}}function p(e,t){return Math.abs(o.default(e).diff(t,"days"))}function h(e){return+e<10?"0"+e:e.toString()}function y(e,t,n){var a=t instanceof Date?{monthId:o.default(t).format("YYYYMM"),dayId:o.default(t).format("DD")}:t,r=e.months.findIndex((function(e){return e.id===a.monthId}));if(e.months[r]){var i=e.months[r].days[+a.dayId-1];Object.assign(i,n)}}function E(e,t,n){for(var a=p(t.startsAt,t.finishesAt),r=0;r<=a;r++){y(e,o.default(t.startsAt).add(r,"day").toDate(),n)}}function g(e,t,n,a){var r=function(t){t.startsAt&&t.finishesAt&&E(e,t,{es_id:v(t.startsAt),editing:t.editing||!1})};return{calendarFillEvents:function(){t.value.forEach((function(e){r(e)}))},setEventOnChoosingDays:function(i){var s,d,l=function(e,t){var n,a=""+e.startsAtId.monthId+h(e.startsAtId.dayId),r=""+e.finishesAtId.monthId+h(e.finishesAtId.dayId);return+a>+r&&(a=(n=[r,a])[0],r=n[1]),{id:null,es_id:+a,startsAt:o.default(a+""+t.startsAtTime,"YYYYMMDDHH:mm").toDate(),finishesAt:o.default(r+""+t.finishesAtTime,"YYYYMMDDHH:mm").toDate(),editing:!0}}(n,i);!function(){for(var t in n)y(e,n[t],{choosing:!1})}(),function(e){Object.assign(e,{startsAtId:null,finishesAtId:null})}(n),s=l.startsAt,d=l.finishesAt,(o.default(s).isSame(d,"day")?[s,d]:function(){for(var e=[],t=p(s,d),n=0;n<=t;n++)e.push(o.default(s).add(n,"day").toDate());return e}()).some((function(t){var n,a=o.default(t).format("YYYYMM"),r=o.default(t).format("D"),i=e.months.findIndex((function(e){return e.id===a}));return!!e.months[i]&&!!(null===(n=e.months[i].days[+r-1])||void 0===n?void 0:n.es_id)}))||(t.value.push(l),f(t),r(l),a.value=l)}}}var D={name:"VECDay",props:{day:{type:Object,required:!0},shift:{type:Number,required:!0},monthId:{type:String,required:!0}},setup:function(t){var n=e.computed((function(){var e=(t.day.id+t.shift-1)%7;return 6===e||0===e})),a=e.inject("choosingDatesState"),o=e.inject("focusedEventState"),r=e.computed((function(){var e;return t.day.es_id&&t.day.es_id===(null===(e=o.value)||void 0===e?void 0:e.es_id)}));return{isWeekend:n,clickOnDay:function(){t.day.es_id?o.value={es_id:t.day.es_id}:a.startsAtId?a.finishesAtId={monthId:t.monthId,dayId:t.day.id}:a.startsAtId={monthId:t.monthId,dayId:t.day.id}},isEventFocused:r,isStartDay:e.computed((function(){return t.day.es_id===+(""+t.monthId+h(t.day.id))}))}}};const M=["data-es-id"],b={class:"vec-day__number"};D.render=function(t,n,a,o,r,i){return e.openBlock(),e.createElementBlock("div",{"data-es-id":a.day.es_id,class:e.normalizeClass(["vec-day",[{"vec-day_weekend":o.isWeekend,"vec-day_scheduled":a.day.es_id,"vec-day_start-day":o.isStartDay,"vec-day_choosing":a.day.choosing,"vec-day_editing":a.day.editing,"vec-day_focused":o.isEventFocused}]]),onClick:n[0]||(n[0]=e.withModifiers(((...e)=>o.clickOnDay&&o.clickOnDay(...e)),["prevent"]))},[e.createElementVNode("div",b,e.toDisplayString(a.day.id),1)],10,M)},D.__file="src/components/Day.vue";var k={name:"VECMonth",components:{VecDay:D},props:{month:{type:Object,required:!0}},setup:function(t){var n=t.month;return{monthName:e.computed((function(){var e=o.default(n.firstDayOfMonth).format("MMMM YYYY");return e.charAt(0).toUpperCase()+e.slice(1)})),shiftFirstDay:function(){var e=0===o.default.localeData().firstDayOfWeek();return"--vec-month-first-day-shift: "+(0===n.shift?e?1:7:n.shift+(e?1:0))}}}};const A={class:"vec-month"},Y={class:"vec-month__title"};k.render=function(t,n,a,o,r,i){const s=e.resolveComponent("vec-day");return e.openBlock(),e.createElementBlock("div",A,[e.createElementVNode("div",Y,e.toDisplayString(o.monthName),1),e.createElementVNode("div",{class:"vec-month__days",style:e.normalizeStyle(o.shiftFirstDay())},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.month.days,(t=>(e.openBlock(),e.createBlock(s,{key:a.month.id+t.id,day:t,shift:a.month.shift,monthId:a.month.id},null,8,["day","shift","monthId"])))),128))],4)])},k.__file="src/components/Month.vue";var S={id:0,es_id:null,editing:!1,choosing:!1};function w(e){return new Date(e.getFullYear(),e.getMonth(),1)}function C(e){return o.default(e).format("YYYYMM")}function V(e,t,n){void 0===e&&(e=[]);var a,r,s,d=(a=t,r=e.length,s=new Date(a.getTime()),new Date(s.setMonth(s.getMonth()+r))),l=function(e){var t=o.default(e).daysInMonth();return Array.from({length:t},(function(e,t){return i(i({},S),{id:t+1})}))}(d),c={firstDayOfMonth:d,id:C(d),shift:d.getDay(),days:l};return e.push(c),o.default(d).isSame(n,"month")||V(e,t,n),e}var T=e.defineComponent({name:"VECCalendar",components:{VecMonth:k},setup:function(){var t=e.inject("calendarState"),n=u(),a=[];if(0===o.default.localeData().firstDayOfWeek())a=o.default.weekdaysMin();else{var r=function(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))}([],o.default.weekdaysMin());r.push(r.shift()),a=r}return{calendarState:t,weekDaysArray:a,addMonthsToCalendar:function(e){t.months=function(e,t,n){var a,r;void 0===n&&(n=2),"after"===t?(a=o.default(e.months[e.months.length-1].firstDayOfMonth).add(1,"month"),r=o.default(a).add(n,"month")):(r=o.default(e.months[0].firstDayOfMonth).add(-1,"month"),a=o.default(r).add(-Math.abs(n),"month"));var i=V([],a.toDate(),r.toDate());return"before"==t?i.concat(e.months):e.months.concat(i)}(t,e).slice()},i18n:n}}});const F={class:"vec-calendar"},N={class:"vec-calendar__header"},B={class:"vec-calendar__weekdays"},I=e.createElementVNode("span",{class:"vec-chevron_up"},null,-1),L=e.createElementVNode("span",{class:"vec-chevron_down"},null,-1);T.render=function(t,n,a,o,r,i){const s=e.resolveComponent("vec-month");return e.openBlock(),e.createElementBlock("div",F,[e.createElementVNode("div",N,[e.createElementVNode("div",B,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.weekDaysArray,(t=>(e.openBlock(),e.createElementBlock("div",{key:t,class:"vec-calendar__weekday"},e.toDisplayString(t),1)))),128))])]),e.createElementVNode("button",{class:"vec-months__shift vec-months__shift_before",onClick:n[0]||(n[0]=e=>t.addMonthsToCalendar("before"))},[I,e.createTextVNode(e.toDisplayString(t.i18n.t("add_months_before")),1)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.calendarState.months,(t=>(e.openBlock(),e.createBlock(s,{key:t.id,month:t},null,8,["month"])))),128)),e.createElementVNode("button",{class:"vec-months__shift vec-months__shift_after",onClick:n[1]||(n[1]=e=>t.addMonthsToCalendar("after"))},[L,e.createTextVNode(e.toDisplayString(t.i18n.t("add_months_after")),1)])])},T.__file="src/components/Calendar.vue";var O=e.defineComponent({name:"VECDefaultTime",setup:function(){var t=e.inject("defaultTimeState");return{i18n:u(),defaultTimeState:t}}});const j={class:"vec-events-default-time"},H={class:"vec-events-dt__inputs"},x={class:"vec-events-dt__prompt"};O.render=function(t,n,a,o,r,i){return e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("div",H,[e.createElementVNode("span",null,e.toDisplayString(t.i18n.t("default_time_title"))+": ",1),e.createElementVNode("span",null,e.toDisplayString(t.i18n.t("time_from"))+" ",1),e.withDirectives(e.createElementVNode("input",{type:"time","onUpdate:modelValue":n[0]||(n[0]=e=>t.defaultTimeState.startsAtTime=e),class:"vec-event__time-input vec-events-dt__input"},null,512),[[e.vModelText,t.defaultTimeState.startsAtTime]]),e.createElementVNode("span",null,e.toDisplayString(t.i18n.t("time_till"))+" ",1),e.withDirectives(e.createElementVNode("input",{type:"time","onUpdate:modelValue":n[1]||(n[1]=e=>t.defaultTimeState.finishesAtTime=e),class:"vec-event__time-input vec-events-dt__input"},null,512),[[e.vModelText,t.defaultTimeState.finishesAtTime]])]),e.createElementVNode("div",x,e.toDisplayString(t.i18n.t("default_time_prompt")),1)])},O.__file="src/components/DefaultTime.vue";var q=e.defineComponent({name:"VECGuardAlert",props:{guardAlertConfirm:{type:Function,default:function(){}}},setup:function(){return{i18n:u()}}});const U={class:"vec-guard-alert"},P={class:"vec-guard-alert__prompt"},z={class:"vec-guard-alert__buttons"};q.render=function(t,n,a,o,r,i){return e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("div",P,e.toDisplayString(t.i18n.t("guard_prompt")),1),e.createElementVNode("div",z,[e.createElementVNode("button",{onClick:n[0]||(n[0]=e=>t.guardAlertConfirm("no")),class:"vec-button vec-button_primary-bg"},e.toDisplayString(t.i18n.t("guard_no")),1),e.createElementVNode("button",{onClick:n[1]||(n[1]=e=>t.guardAlertConfirm("yes")),class:"vec-button vec-button_danger-bg"},e.toDisplayString(t.i18n.t("guard_yes")),1)])])},q.__file="src/components/GuardAlert.vue";var G=e.defineComponent({name:"VECEvent",components:{VecGuardAlert:q},props:{event:{type:Object,required:!0},saveEventFn:{type:Function,required:!0},editEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,default:function(){}}},setup:function(t){var n,a=u(),r=e.inject("eventsState"),l=e.inject("calendarState"),c=e.inject("defaultTimeState"),f=e.inject("focusedEventState"),p=_(r,l),h=p.removeEventAction,y=p.toggleEventEditAction,E=p.updateEventInTheState,g=e.ref(o.default(t.event.startsAt).format("HH:mm")),D=e.ref(o.default(t.event.finishesAt).format("HH:mm")),M=e.ref(t.event.editing),b=e.ref(!1),k=e.ref(!1),A=e.ref(""),Y=e.computed((function(){return e=t.event.startsAt,n=t.event.finishesAt,o.default(e).isSame(n,"day")?o.default(e).format("DD MMMM YYYY"):o.default(e).isSame(n,"month")?o.default(e).format("DD–")+o.default(n).format("DD MMMM YYYY"):o.default(e).isSame(n,"year")?o.default(e).format("DD MMMM – ")+o.default(n).format("DD MMMM YYYY"):o.default(e).format("DD MMMM YYYY – ")+o.default(n).format("DD MMMM YYYY");var e,n})),S=e.computed((function(){return g.value+"–"+D.value}));e.watch(f,(function(e){b.value=!!e&&e.es_id===t.event.es_id}));var w=e.computed((function(){return g.value!==c.startsAtTime||D.value!==c.finishesAtTime})),C=e.ref(null===(n=t.event)||void 0===n?void 0:n.data),V=e.ref(Math.random()),T=e.ref("hidden");return{i18n:a,eventTimeStartsAt:g,eventTimeFinishesAt:D,formattedDate:Y,formattedTime:S,eventData:C,setDefaultTime:function(){g.value=i({},c).startsAtTime,D.value=i({},c).finishesAtTime},isNotDefaultTime:w,isEventEditing:M,isFocused:b,editEvent:function(){t.editEventFn().then((function(){y(t.event,{editing:!0}),M.value=!0})).catch((function(e){console.error(e)}))},cancelEditing:function(){g.value=o.default(t.event.startsAt).format("HH:mm"),D.value=o.default(t.event.finishesAt).format("HH:mm"),C.value=t.event.data,y(t.event,{editing:!1}),M.value=!1,V.value=Math.random()},saveEvent:function(){k.value=!0;var e={id:void 0===t.event.id?null:t.event.id,startsAt:m(t.event.startsAt,g.value),finishesAt:m(t.event.finishesAt,D.value),data:C.value};t.saveEventFn(e).then((function(t){if(t&&t.error)throw A.value=t.error,new Error(t.error);if(!t||!t.id)throw new Error("Something went wrong: the event was not saved");if(+t.startsAt!=+e.startsAt||+t.finishesAt!=+e.finishesAt){var n=function(e){return o.default(e).format("YYYY-MM-DD, HH:mm")},a="Something went wrong: dates was changed. Expected: "+n(e.startsAt)+" and "+n(e.finishesAt)+". Received: "+n(t.startsAt)+", "+n(t.finishesAt);throw A.value=a,new Error(a)}t.es_id=v(t.startsAt),E(t,t),y(t,{editing:!1}),f.value=null,k.value=!1,M.value=!1})).catch((function(e){k.value=!1,M.value=!0,console.error(e)}))},removeEvent:function(){null===t.event.id||void 0===t.event.id?h(t.event):T.value="shown"},loader:k,guardAlertState:T,guardAlertConfirm:function(){return function(e){return s(this,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return n.sent(),"yes"===e?t.removeEventFn(t.event).then((function(){h(t.event)})).catch((function(e){console.error(e)})):T.value="hidden",[2]}}))}))}},serverError:A,forceUpdateKey:V}}});const W=["id"],K={key:0,class:"vec-event-loader__wrapper"},R=[e.createElementVNode("div",{class:"vec-loader"},null,-1)],$={class:"vec-event__header"},J={class:"vec-event__dates"},Q={key:2,class:"vec-event__set-time"},X={key:4,class:"vec-event__server-error"},Z={class:"vec-event__footer"};G.render=function(t,n,a,o,r,i){const s=e.resolveComponent("VecGuardAlert");return e.openBlock(),e.createElementBlock("div",{key:t.forceUpdateKey,id:`vec-es-id-${t.event.es_id}`,class:e.normalizeClass(["vec-event",{"vec-event_focused":t.isFocused,"vec-event_editing":t.isEventEditing}])},[t.loader?(e.openBlock(),e.createElementBlock("div",K,R)):e.createCommentVNode("v-if",!0),"shown"===t.guardAlertState?(e.openBlock(),e.createBlock(s,{key:1,guardAlertConfirm:t.guardAlertConfirm()},null,8,["guardAlertConfirm"])):e.createCommentVNode("v-if",!0),e.createElementVNode("header",$,[e.createElementVNode("div",J,e.toDisplayString(t.formattedDate)+", "+e.toDisplayString(t.formattedTime),1)]),t.isEventEditing?(e.openBlock(),e.createElementBlock("div",Q,[e.createElementVNode("span",null,e.toDisplayString(t.i18n.t("time_from"))+" ",1),e.withDirectives(e.createElementVNode("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":n[0]||(n[0]=e=>t.eventTimeStartsAt=e)},null,512),[[e.vModelText,t.eventTimeStartsAt]]),e.createElementVNode("span",null,e.toDisplayString(t.i18n.t("time_till"))+" ",1),e.withDirectives(e.createElementVNode("input",{class:"vec-event__time-input",type:"time","onUpdate:modelValue":n[1]||(n[1]=e=>t.eventTimeFinishesAt=e)},null,512),[[e.vModelText,t.eventTimeFinishesAt]]),t.isNotDefaultTime?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:n[2]||(n[2]=(...e)=>t.setDefaultTime&&t.setDefaultTime(...e)),class:"vec-button vec-button_primary-bg"},e.toDisplayString(t.i18n.t("set_default_time")),1)):e.createCommentVNode("v-if",!0)])):e.createCommentVNode("v-if",!0),t.eventComponent&&Object.keys(t.eventComponent).length?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.eventComponent),{key:3,isEventEditing:t.isEventEditing,eventData:t.eventData,"onUpdate:eventData":n[3]||(n[3]=e=>t.eventData=e)},null,8,["isEventEditing","eventData"])):e.createCommentVNode("v-if",!0),t.serverError?(e.openBlock(),e.createElementBlock("div",X,e.toDisplayString(t.serverError),1)):e.createCommentVNode("v-if",!0),e.createElementVNode("footer",Z,[e.createElementVNode("button",{class:"vec-button vec-button_danger-bg",onClick:n[4]||(n[4]=e.withModifiers(((...e)=>t.removeEvent&&t.removeEvent(...e)),["prevent"]))},e.toDisplayString(t.i18n.t("button_remove")),1),t.isEventEditing?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:n[5]||(n[5]=e.withModifiers(((...e)=>t.cancelEditing&&t.cancelEditing(...e)),["prevent"])),class:"vec-button vec-button_outline"},e.toDisplayString(t.i18n.t("button_cancel")),1)):e.createCommentVNode("v-if",!0),e.createElementVNode("button",{class:"vec-button vec-button_primary-bg",onClick:n[6]||(n[6]=e.withModifiers((e=>t.isEventEditing?t.saveEvent():t.editEvent()),["prevent"]))},e.toDisplayString(t.isEventEditing?t.i18n.t("button_save"):t.i18n.t("button_edit")),1)])],10,W)},G.__file="src/components/Event.vue";var ee=e.defineComponent({name:"VECEvents",components:{VecDefaultTimeComponent:O,VecEventComponent:G},props:{editEventFn:{type:Function,required:!0},saveEventFn:{type:Function,required:!0},removeEventFn:{type:Function,required:!0},eventComponent:{type:Object,required:!0}},setup:function(){var t=e.inject("eventsState"),n=e.inject("focusedEventState");return e.watch(n,(function(t){t&&e.nextTick((function(){var e=document.getElementById("vec-es-id-"+t.es_id);null==e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))})),{events:t}}});const te={class:"vec-events__wrapper"},ne={class:"vec-events"};ee.render=function(t,n,a,o,r,i){const s=e.resolveComponent("vec-default-time-component"),d=e.resolveComponent("vec-event-component");return e.openBlock(),e.createElementBlock("div",te,[e.createVNode(s),e.createElementVNode("div",ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.events,(n=>(e.openBlock(),e.createBlock(d,{key:`es-id-${n.es_id}`,event:n,saveEventFn:t.saveEventFn,editEventFn:t.editEventFn,removeEventFn:t.removeEventFn,eventComponent:t.eventComponent},null,8,["event","saveEventFn","editEventFn","removeEventFn","eventComponent"])))),128))])])},ee.__file="src/components/Events.vue";var ae=e.defineComponent({name:"VueEventCreator",components:{VecCalendar:T,VecEvents:ee},props:{language:{type:String,default:"en"},firstDate:{type:Date,default:new Date},defaultTime:{type:Object,default:function(){return{startsAtTime:"10:00",finishesAtTime:"17:00"}}},monthsOnPage:{type:Number,default:3},editEventFn:{type:Function,default:function(e){return s(void 0,void 0,void 0,(function(){return d(this,(function(e){return[2]}))}))}},saveEventFn:{type:Function,default:function(e){return s(void 0,void 0,void 0,(function(){return d(this,(function(e){return[2]}))}))}},removeEventFn:{type:Function,default:function(e){return s(void 0,void 0,void 0,(function(){return d(this,(function(e){return[2]}))}))}},eventComponent:{type:Object,default:{}},getEventsFn:{type:Function,default:function(){return s(void 0,void 0,void 0,(function(){return d(this,(function(e){return[2,[]]}))}))}}},setup:function(t){var n,a,i=e.ref(!0),s=e.ref(!1),d=e.reactive({months:[]}),u=e.ref([]),m=e.reactive({startsAtId:null,finishesAtId:null}),_=e.reactive(t.defaultTime);n=t.language,a=l.messages[n],c.t=function(e){return a[e]?a[e]:"translation missing: '"+e+"'"},function(e){o.default.locale(e),o.default.extend(r.default),o.default.localeData()}(t.language);var p=e.ref(null),h=g(d,u,m,p),E=h.calendarFillEvents,D=h.setEventOnChoosingDays;return t.getEventsFn().then((function(e){u.value=e.map((function(e){return e.es_id=v(e.startsAt),e})),f(u),d.months=function(e,t,n){var a,r;if(t.length){var i=o.default(t[0].startsAt).isAfter(e,"month")&&o.default(t[0].startsAt).isBefore(o.default(e).add(3,"month"),"month")?e:t[0].startsAt;a=new Date(w(i));var s=t[t.length-1].finishesAt;r=Math.abs(o.default(i).diff(s,"month"))>n?new Date(w(s)):o.default(i).add(n,"month").toDate()}else a=new Date(w(e)),r=o.default(e).add(n-1,"month").toDate();return V([],a,r)}(t.firstDate,u.value,t.monthsOnPage),E(),i.value=!1})),e.watch(m,(function(e){if(e)if(e.finishesAtId)D(_);else if(e.startsAtId){y(d,e.startsAtId,{choosing:!0});var t=function(n){document.body.removeEventListener("click",t),n.target.classList.contains("vec-day__number")||n.target.classList.contains("vec-day")||(y(d,e.startsAtId,{choosing:!1}),m.startsAtId=null)};setTimeout((function(){document.body.addEventListener("click",t)}))}})),e.watch(p,(function(e){if(e){var t,n,a=(t=e.es_id,n=function(e){var a=e.target.classList.contains("vec-day__number")?e.target.parentElement:e.target,o=Array.from(document.querySelectorAll('[data-es-id="'+t+'"]'));if(o.length){for(var r=!1,i=0,s=o;i<s.length;i++)if(s[i]===a){r=!0;break}r||(document.body.removeEventListener("click",n),a.hasAttribute("data-es-id")||(p.value=null))}else document.body.removeEventListener("click",n)});setTimeout((function(){document.body.addEventListener("click",a)}))}})),e.provide("calendarState",d),e.provide("eventsState",u),e.provide("choosingDatesState",m),e.provide("focusedEventState",p),e.provide("defaultTimeState",_),{calendarState:d,loader:i,isSwitcherOn:s}}});const oe={key:0,class:"vec-loader__wrapper"},re=[e.createElementVNode("div",{class:"vec-loader"},null,-1)],ie={key:1,class:"vec-body"};return ae.render=function(t,n,a,o,r,i){const s=e.resolveComponent("vec-calendar"),d=e.resolveComponent("vec-events");return t.loader?(e.openBlock(),e.createElementBlock("div",oe,re)):(e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("div",{class:e.normalizeClass(["vec-calendar__switcher",{"vec-calendar__switcher_on":t.isSwitcherOn}]),onClick:n[0]||(n[0]=e=>t.isSwitcherOn=!t.isSwitcherOn)},[e.createElementVNode("div",{class:e.normalizeClass(["vec-chevron_l",{"vec-chevron_l-left":t.isSwitcherOn}])},null,2)],2),e.createVNode(s,{firstDate:t.firstDate,monthsOnPage:t.monthsOnPage},null,8,["firstDate","monthsOnPage"]),e.createVNode(d,{saveEventFn:t.saveEventFn,editEventFn:t.editEventFn,removeEventFn:t.removeEventFn,eventComponent:t.eventComponent},null,8,["saveEventFn","editEventFn","removeEventFn","eventComponent"])]))},ae.__file="src/VueEventCreator.vue",ae}(Vue,dayjs,localeData);
